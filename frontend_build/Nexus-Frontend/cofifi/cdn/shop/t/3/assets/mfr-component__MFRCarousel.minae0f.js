window._mfrAlpineRegistered=window._mfrAlpineRegistered||{},window._mfrAlpineRegistered.MFRCarousel||(document.addEventListener("alpine:init",()=>{Alpine.data("MFRCarousel",(e={})=>({flkty:null,observer:null,onChangeFuncs:[],settings:{cellAlign:"left",contain:!0,wrapAround:!1,selectedAttraction:.2,friction:.8,cellSelector:".mfr-carousel__item",...e},mobileSettings:{...e.mobileSettings??e},selectors:{itemClass:".mfr-carousel__item"},resizeDebounceTimeout:null,isExceeded:!1,forceCarousel:e.forceCarousel,init(){"none"!=this.settings?.renderCarouselOn&&(this.checkAndToggle(),this.checkViewportChange(),this.checkIfExceeded(),this.observer=new ResizeObserver(()=>{this._resizeObserverFunction()}),this.observer.observe(this.$el))},_resizeObserverFunction(){this.resizeDebounceTimeout&&clearTimeout(this.resizeDebounceTimeout),this.resizeDebounceTimeout=setTimeout(()=>{requestAnimationFrame(()=>{this.checkAndToggle(),this.checkIfExceeded()})},100)},checkAndToggle(){const e=this.$el,t=e.offsetWidth;this.calculateTotalWidth(e,!1)>t||this.forceCarousel?this.flkty||this.$el.classList.contains("flickity-enabled")?this.flkty.resize():this.initFlickity():this.forceCarousel||this.destroyFlickity()},calculateTotalWidth(e,t=!1){const s=e.querySelectorAll(this.selectors.itemClass);let i=0;for(let e=0;e<s.length;e++){const n=s[e],l=getComputedStyle(n),o=parseFloat(l.marginLeft)+parseFloat(l.marginRight);if(t&&e===s.length-1){const e=parseFloat(l.paddingRight),t=parseFloat(l.paddingLeft)-e;i+=n.offsetWidth+o+t}else i+=n.offsetWidth+o}return i},initFlickity(){const e=this.getSettings(),t=this.settings.renderCarouselOn,s=window.innerWidth;let i;this.destroyFlickity(),"mobile"===t&&s>=1024||"desktop"===t&&s<=1023?this.$el.classList.contains("flickity-enabled")&&this.destroy():(this.flkty=i=new Flickity(this.$el,e),i.on("settle",e=>{this.settings.allowPlayAllVideos||this.$el.querySelectorAll("video").forEach(e=>{e.pause()});const t=i.cells.filter((t,s,i)=>s!=e);t&&this.removeFocusOnElements(t);const s=i.cells[e]?.element;if(s&&(this.addFocusOnElements(s),!this.settings.allowPlayAllVideos)){const e=s.querySelector("video[data-mfr-autoplay]");e&&e.play().catch(()=>{console.warn("Video couldn't autoplay â€” user interaction might be required.")})}}),i.on("change",e=>{this.onChangeFuncs.forEach(t=>{t(e)})}),this.flkty.on("ready",this.equalizeItems.bind(this)),this.flkty.on("resize",this.equalizeItems.bind(this)),this.flkty.on("settle",this.equalizeItems.bind(this)))},getSettings(){return{...this.settings,...window.innerWidth<=1023&&this.mobileSettings?this.mobileSettings:{},on:{ready:()=>{this.$nextTick(()=>{this.initCustomPageDots(),this.initCustomNavButtons()}),this.settings.hasOwnProperty("onReady")&&this.settings.onReady()}}}},destroyFlickity(){this.flkty&&(this.flkty.destroy(),this.flkty=null,this.$el.querySelector(".mfr-carousel-nav")&&this.$el.querySelectorAll(".mfr-carousel-nav").forEach((e,t)=>{e.remove()}),this.$el.querySelector(".mfr-custom-page-dots")&&this.$el.querySelectorAll(".mfr-custom-page-dots").forEach((e,t)=>{e.remove()}))},destroy(){this.observer&&this.observer.disconnect(),this.destroyFlickity()},checkViewportChange(){onViewportChange(()=>{this.destroyFlickity(),this.checkAndToggle()},()=>{this.destroyFlickity(),this.checkAndToggle()})},addFocusOnElements(e){const t=getFocusableElements(e);t.length>0&&t.forEach(e=>{e.setAttribute("tabindex","1")})},removeFocusOnElements(e){e.forEach(e=>{const t=getFocusableElements(e.element);t.length>0&&t.forEach(e=>{e.setAttribute("tabindex","-1")})})},mobileDesktopSettingsConditions(e){if(e)return!0===this.getSettings()[e]&&window.innerWidth<=1023||!0===this.getSettings()[e]&&window.innerWidth>=1024},initCustomPageDots(){if(this.$el.querySelector(".mfr-custom-page-dots")&&this.$el.querySelectorAll(".mfr-custom-page-dots").forEach((e,t)=>{e.remove()}),this.mobileDesktopSettingsConditions("customPageDots")){const e=document.createElement("div");e.className="mfr-custom-page-dots";const t=document.createElement("div");t.className="mfr-custom-page-dots__inner";const s=this.$el.querySelectorAll(this.selectors.itemClass).length;e.style.setProperty("width",""+84*s),e.append(t),this.flkty.element.appendChild(e),e.style.setProperty("--percentage",(this.updateProgress()/100).toFixed(2)),this.flkty.on("scroll",t=>{e.style.setProperty("--percentage",(this.updateProgress()/100).toFixed(2))})}},toClampedPercentage(e){const t=e,s=Math.min(100,Math.max(0,t));return parseFloat(s.toFixed(2))},updateProgress(){const e=this.flkty.element,t=this.$el.querySelectorAll(this.selectors.itemClass),s=e.getBoundingClientRect(),i=s.left,n=s.right;let l=0;const o=t.length;t.forEach((e,t)=>{const s=e.getBoundingClientRect(),r=s.left,a=s.right,c=s.width,h=Math.max(r,i),d=Math.min(a,n),u=Math.max(0,d-h)/c*100;l+=o>t+1&&u<100&&r<i?100:Math.min(u,100)});return l/o},initCustomNavButtons(){if(this.$el.querySelector(".mfr-carousel-nav")&&this.$el.querySelectorAll(".mfr-carousel-nav").forEach((e,t)=>{e.remove()}),this.mobileDesktopSettingsConditions("customPrevNextButtons")){const e=document.createElement("div");e.className="mfr-carousel-nav";const t=document.createElement("div");t.className="mfr-carousel-nav__inner";const s=this.createNavButton("left","Previous slide"),i=this.createNavButton("right","Next slide");t.appendChild(s),t.appendChild(i),e.append(t),this.flkty.element.appendChild(e),s.addEventListener("click",()=>{this.flkty.previous()}),i.addEventListener("click",()=>{this.flkty.next()}),this.updateNavButtons(s,i),this.flkty.on("change",()=>this.updateNavButtons(s,i))}},createNavButton(e,t){const s=document.createElement("button");s.className=`mfr-carousel-nav__button ${e}`,s.setAttribute("aria-label",t),s.setAttribute("type","button"),s.innerHTML='\n          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="26">\n            <path fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" transform="matrix(-4.37114e-08 -1 1 -4.37114e-08 0.548828 24.5488)" d="M24 12L12 0L0 12" fill-rule="evenodd"/>\n          </svg>\n        ';const i=document.createElement("span");return i.className="visually-hidden",i.textContent=t,s.appendChild(i),s},updateNavButtons(e,t){0===this.flkty.selectedIndex?e.setAttribute("disabled","true"):e.removeAttribute("disabled"),this.flkty.selectedIndex===this.flkty.slides.length-1?t.setAttribute("disabled","true"):t.removeAttribute("disabled")},checkIfExceeded(){const e={1600:1600,1920:1920,2560:2400,3840:2560},t=()=>{let e=0;return this.$el.querySelectorAll(this.selectors.itemClass).forEach(t=>{const s=window.getComputedStyle(t),i=t.clientWidth-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight);e+=i}),e};(()=>{const s=window.innerWidth,i=t(),n=Object.keys(e).map(Number).sort((e,t)=>e-t);let l=!1;for(let t=0;t<n.length-1;t++){const o=n[t],r=n[t+1];if(s>=o&&s<r){return l=i>e[o],l}}const o=n[n.length-1];if(s>=o){const t=e[o];this.isExceeded=i>t}})()},selectCell(e){e>=0&&this.flkty&&this.flkty.selectCell(e)},onChange(e){this.onChangeFuncs.push(e)},equalizeItems(){if(!this.settings?.equalizeItemHeights)return;const e=this.$el.querySelectorAll(".mfr-carousel__item");let t=0;e.forEach(e=>{e.style.height="",t=Math.max(t,e.offsetHeight)}),e.forEach(e=>{e.style.height=t+"px"})}}))}),window._mfrAlpineRegistered.MFRCarousel=!0);
//# sourceMappingURL=mfr-component__MFRCarousel.min.js.map

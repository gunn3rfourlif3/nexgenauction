window._mfrAlpineRegistered=window._mfrAlpineRegistered||{},window._mfrAlpineRegistered.MFROffcanvasProductForm||(document.addEventListener("alpine:init",()=>{Alpine.data("MFROffcanvasProductForm",()=>({$formInner:null,$formHead:null,$formBody:null,selectors:{formInner:".offcanvas-product-form__form-inner",formHead:".offcanvas-product-form__form-head",formBody:".offcanvas-product-form__form-body",script:".variant-pack-form-script",head:{title:".product-top__header-left .product-title",price:".product-top__header-right .product-price"},body:{hiddenInputs:".variant-pack-form__hidden-inputs",images:".product-top__media",frequency:".variant-pack-form__frequencies",selectors:".variant-pack-form__selectors",submit:".variant-pack-form__submit-wrapper",submitSubText:".variant-pack-form__submit-sub-text",visualizer:".variant-pack-form__visualizer"}},init(){this.$formInner=this.$el.querySelector(this.selectors.formInner),this.$formHead=this.$el.querySelector(this.selectors.formHead),this.$formBody=this.$el.querySelector(this.selectors.formBody)},openOffcanvas(e){const{productURL:t}=e;this.productURL=t,this.$store.offCanvasProductForm.openOffcanvas(),this.loadProductForm(t)},async loadProductForm(){if(!this.productURL)return;this.$el.classList.add("is-loading");const{data:e}=await axios.get(this.productURL),t=document.createElement("div");t.innerHTML=e;const r=t.querySelector("[data-mfr-product-top]");this.renderElements(r),this.$el.classList.remove("is-loading")},renderElements(e){this.$formHead.innerHTML="",this.$formBody.innerHTML="";const t=e.querySelector("#store-pdp"),r=e.querySelector("link[rel='stylesheet']"),o=(t,r,o)=>{const i=e.querySelector(t[r]);i&&(i.querySelector("script")&&this.appendAndExcuteScript(i.querySelector("script")),o.append(i),i.hasAttribute("data-stagger-inview")&&window.initStaggerInview(i,{noScrollTrigger:!0}),window.initInview(i,{noScrollTrigger:!0}))};Object.keys(this.selectors.head).forEach(e=>{o(this.selectors.head,e,this.$formHead)}),Object.keys(this.selectors.body).forEach(e=>{o(this.selectors.body,e,this.$formBody)}),this.$formBody.append(this.generateAnchor(this.productURL,"View Details")),this.appendAndExcuteScript(t),this.$formInner.append(r),window.$storePDP(),Alpine.$data(this.$formBody)?.reset(),this.$nextTick(()=>{Alpine.$data(this.$formBody).sendGA4Datalayer("view_product_form"),Alpine.$data(this.$formBody.querySelector(".flickity-enabled")).flkty.resize(),this.$el.querySelector(this.selectors.body.selectors)&&(Alpine.$data(this.$el.querySelector(this.selectors.body.selectors)).$section=this.$el)})},appendAndExcuteScript(e){const t=document.createElement("script");t.textContent=e.textContent,[...e.attributes].forEach(e=>t.setAttribute(e.name,e.value)),this.$formInner.appendChild(t)},generateAnchor(e,t){const r=document.createElement("a");return r.href=e,r.classList.add("offcanvas-product-form__form-anchor"),r.textContent=t,r.setAttribute("aria-label",t),r.setAttribute("title",t),r}}))}),window._mfrAlpineRegistered.MFROffcanvasProductForm=!0);
//# sourceMappingURL=mfr-component__MFROffcanvasProductForm.min.js.map

window._mfrAlpineRegistered=window._mfrAlpineRegistered||{},window._mfrAlpineRegistered.MFRCarouselMarquee||(document.addEventListener("alpine:init",()=>{Alpine.data("MFRCarouselMarquee",(e={})=>({settings:{scrollSpeed:1,...e},vars:{requestId:null,$carousel:null,pauseOnDrag:null,toLeft:"left"==e.direction,resizeBound:!1,appendCounter:0,maxAppends:3,destroyed:!1,resizeHandler:null},init(){this.vars.pauseOnDrag=this.settings.pauseOnDrag,this.vars.scrollSpeed=this.settings.scrollSpeed,"none"!=this.settings?.renderAutoScrollOn&&(this.initRender(),this.setClass())},setClass(){"mobile"==this.settings.renderAutoScrollOn&&this.$el.classList.add("mobile-carousel")},initRender(){let e;this.checkViewport(),this.vars.resizeHandler=()=>{clearTimeout(e),e=setTimeout(()=>{this.vars.destroyed||this.checkViewport()},200)},window.addEventListener("resize",this.vars.resizeHandler,{passive:!0}),this.pauseOnWindowResize()},checkViewport(){if(this.vars.destroyed)return;const e=this.getCarouselItems(),s=this.getTotalItemsWidth(e),t=this.$el.offsetWidth,i=this.settings.renderAutoScrollOn,r=window.innerWidth;if("mobile"===i&&r>=1024)this.destroy();else if("desktop"===i&&r<=1023)this.destroy();else if(s>=t)this.initCarousel();else{if(this.$el.classList.contains("flickity-enabled")&&this.destroy(),this.vars.appendCounter>=this.vars.maxAppends)return;this.reappendCarouselItems(),requestAnimationFrame(()=>this.checkViewport())}},initCarousel(){this.$el.classList.contains("flickity-enabled")||(this.vars.$carousel=new Flickity(this.$el,{accessibility:!0,resize:!0,wrapAround:!0,prevNextButtons:!1,pageDots:!1,percentPosition:!0,groupCells:!1,cellAlign:"center",imagesLoaded:!0,on:{ready:()=>{this.refreshOnImageLoad()}}}),this.vars.$carousel.x=0,this.play(),this.vars.pauseOnDrag&&(this.$el.addEventListener("pointerdown",()=>{this.pause()}),this.$el.addEventListener("mouseleave",()=>{this.$el.classList.contains("paused")&&(this.$el.classList.remove("paused"),this.vars.requestId||this.play())})),this.setAutoUnfocus(this.$el))},play(){if(this.vars.requestId)return;const e=()=>{this.vars.$carousel.x-=this.vars.scrollSpeed*(this.vars.toLeft?1:-1),this.vars.$carousel.settle(this.vars.$carousel.x),this.vars.requestId=window.requestAnimationFrame(e)};this.vars.requestId=window.requestAnimationFrame(e)},pause(){this.$el.classList.add("paused"),this.vars.requestId&&(window.cancelAnimationFrame(this.vars.requestId),this.vars.requestId=null)},getCarouselItems(){return this.$el.classList.contains("flickity-enabled")?this.$el.querySelector(".flickity-slider")?.children||[]:this.$el.children},getTotalItemsWidth(e){let s=0;const t=Array.from(e);return t.forEach((e,i)=>{if(i===t.length-1)return;const r=getComputedStyle(e),a=parseFloat(r.marginLeft)+parseFloat(r.marginRight);s+=e.offsetWidth+a}),s},reappendCarouselItems(){Array.from(this.$el.children).forEach(e=>{const s=e.cloneNode(!0);s.classList.add("appended-item"),this.$el.appendChild(s)}),this.vars.appendCounter++,"function"==typeof lozad&&lozad("img.lozad").observe()},refreshOnImageLoad(){this.$el.querySelectorAll("img").forEach(e=>{})},_repositionCarousel(){if("undefined"!=typeof Flickity){const e=Flickity.data(this.$el);e&&e.reposition()}},destroy(){this.vars.destroyed||(this.vars.destroyed=!0,this.vars.$carousel&&(this.vars.$carousel.destroy(),this.vars.$carousel=null),this.vars.requestId&&(window.cancelAnimationFrame(this.vars.requestId),this.vars.requestId=null),this.vars.resizeHandler&&(window.removeEventListener("resize",this.vars.resizeHandler),this.vars.resizeHandler=null),this.$el.querySelectorAll(".appended-item").forEach(e=>e.remove()),this.vars.appendCounter=0,this.pause())},setSpeed(e){this.vars.scrollSpeed=e},pauseOnWindowResize(){if(this.vars.resizeBound)return;let e;this.vars.resizeBound=!0;let s=!1;const t=()=>this.pause(),i=()=>this.play();this.vars._resizeHandler=()=>{s||(s=!0,t()),clearTimeout(e),e=setTimeout(()=>{s=!1,i()},250)},window.addEventListener("resize",this.vars._resizeHandler)},setAutoUnfocus(e,s=3e3){if(!e)throw new Error("An element is required.");e.addEventListener("focus",()=>{e._unfocusTimer&&clearTimeout(e._unfocusTimer),e._unfocusTimer=setTimeout(()=>{e.blur(),e._unfocusTimer=null,this.play()},s)})}}))}),window._mfrAlpineRegistered.MFRCarouselMarquee=!0);
//# sourceMappingURL=mfr-component__MFRCarouselMarquee.min.js.map

window._mfrAlpineRegistered=window._mfrAlpineRegistered||{},window._mfrAlpineRegistered.MFRBWAnimatedChart||(document.addEventListener("alpine:init",()=>{Alpine.data("MFRBWAnimatedChart",({initialIndex:e})=>({selectors:{video:".animated-chart__video-bg video",graph:".animated-chart__chart-graph",indicators:".animated-chart__chart-indicators-inner",carousel:".animated-chart__chart-items-carousel",table:".animated-chart__content-table"},chartPercentages:[],contentToShow:{value1:"",value2:"",value3:"",value4:"",value5:"",value6:"",value7:"",value8:"",ctaUrl1:"",ctaLabel1:"",ctaUrl2:"",ctaLabel2:""},initialIndex:e,contentValuesARR:[],currentIndex:0,$video:null,$graph:null,$indicators:null,$carousel:null,$table:null,$changeableValues:null,activeTween:null,suppressCarouselChange:!1,$canvas:null,canvasAlpine:null,init(){this.$graph=this.$el.querySelector(this.selectors.graph),this.$indicators=this.$el.querySelector(this.selectors.indicators),this.$carousel=this.$el.querySelector(this.selectors.carousel),this.$table=this.$el.querySelector(this.selectors.table),this.$changeableValues=this.$table.querySelectorAll(".changeable"),this.$indicators.addEventListener("mfr:dragScroll",e=>{this.setIndexByPercentage(e.detail.percent)}),this.$watch("currentIndex",()=>{((e,t)=>{const n=this.$el.querySelectorAll(e);n.forEach(e=>e.querySelector("button").classList.remove("adjacent")),t<0||t>=n.length||(t-1>=0&&n[t-1].querySelector("button").classList.add("adjacent"),t+1<n.length&&n[t+1].querySelector("button").classList.add("adjacent"))})(".animated-chart__chart-item",this.currentIndex)}),this.$nextTick(()=>{this.initCarouselEvents(),ScrollTrigger&&ScrollTrigger.refresh&&ScrollTrigger.refresh(),this.setIndex(e??0)}),ScrollTrigger&&ScrollTrigger.refresh&&ScrollTrigger.refresh(),this.$nextTick(()=>{this.$canvas=this.$el.closest(".section-spacer").querySelector(".animated-chart__animated-background"),this.canvasAlpine=Alpine.$data(this.$canvas)})},setIndex(e,t={}){const{skipIndicators:n=!1,skipCarousel:a=!1}=t;this.currentIndex=e,this.canvasAlpine?.setAnimation&&this.canvasAlpine.setAnimation(e),n||this.updateIndicators(this.currentIndex),this.updateContent(this.currentIndex),a||(this.suppressCarouselChange=!0,this.$nextTick(()=>{const e=Alpine.$data(this.$carousel);e&&e.selectCell(this.currentIndex),requestAnimationFrame(()=>{this.suppressCarouselChange=!1})}))},updateVideo(e){},updateIndicators(e){if(!this.$indicators)return;const t=Alpine.$data(this.$indicators);t&&t?.scrollToPercent(this.chartPercentages[e])},updateContent(e){gsap&&gsap.to&&(this.activeTween&&this.activeTween.kill(),this.activeTween=gsap.to(this.$changeableValues,{yPercent:150,duration:.4,onComplete:()=>{this.contentToShow=this.contentValuesARR[e],gsap.to(this.$changeableValues,{yPercent:0,duration:.6})}}))},pingPongLoop(e,t){const n=this.$video;if(!n||e>=t)return;this._pingPongDestroyer&&this._pingPongDestroyer();let a=null;const i=n.currentTime,r=Math.abs(i-e),s=Math.abs(i-t),l=r<=s?e:t;let c=r<=s?1:-1;const o=performance.now();n.pause();const h=e=>{const t=e-o,r=Math.min(t/1e3,1);n.currentTime=i+(l-i)*r,r<1?a=requestAnimationFrame(h):u(c)},u=(i=1)=>{let r=i,s=performance.now();const l=i=>{const c=(i-s)/1e3;s=i,n.currentTime+=r*c,n.currentTime>=t?(n.currentTime=t,r=-1):n.currentTime<=e&&(n.currentTime=e,r=1),a=requestAnimationFrame(l)};a=requestAnimationFrame(l)};a=requestAnimationFrame(h),this._pingPongDestroyer=()=>{a&&cancelAnimationFrame(a),this._pingPongDestroyer=null}},initCarouselEvents(){const e=Alpine.$data(this.$carousel);e&&e.onChange(e=>{this.suppressCarouselChange||this.setIndex(e,{skipCarousel:!0})})},setIndexByPercentage(e){const t=this.chartPercentages;let n=0;for(let a=0;a<t.length;a++)e>=t[a]&&e<=t[a+1]&&(n=a);e>t[t.length-1]&&(n=t.length-1),this.currentIndex!=n&&this.setIndex(n,{skipIndicators:!0})}}))}),window._mfrAlpineRegistered.MFRBWAnimatedChart=!0);
//# sourceMappingURL=mfr-component__MFRBWAnimatedChart.min.js.map

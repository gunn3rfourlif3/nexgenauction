RewriteEngine On
RewriteBase /
# Canonicalize to www (optional)
RewriteCond %{HTTP_HOST} !^www\.zaaka\.co\.za$ [NC]
RewriteRule ^(.*)$ https://www.zaaka.co.za/$1 [L,R=301]
# Do NOT rewrite API or WebSocket paths
RewriteCond %{REQUEST_URI} ^/api/ [OR]
RewriteCond %{REQUEST_URI} ^/socket.io/
RewriteRule .* - [L]
# Normal SPA rewrite for non-file/non-dir
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.html [L]
# DO NOT REMOVE. CLOUDLINUX PASSENGER CONFIGURATION BEGIN
PassengerAppRoot "/home/zaakacoz/nodeapps/nexus/backend"
PassengerBaseURI "/api"
PassengerNodejs "/home/zaakacoz/nodevenv/nodeapps/nexus/backend/20/bin/node"
PassengerAppType node
PassengerStartupFile server.js
PassengerAppLogFile "/home/zaakacoz/logs/nexus.log"
# DO NOT REMOVE. CLOUDLINUX PASSENGER CONFIGURATION END
# DO NOT REMOVE OR MODIFY. CLOUDLINUX ENV VARS CONFIGURATION BEGIN
<IfModule Litespeed>
SetEnv ALLOWED_ORIGINS https://zaaka.co.za,https://www.zaaka.co.za
SetEnv FRONTEND_URL http://zaaka.co.za
SetEnv MONGODB_URI mongodb+srv://nexus:Arsenal.fc100@cluster0.zhrpq3d.mongodb.net/?appName=Cluster0
SetEnv JWT_SECRET NXORsWAVFApHng6Y6cH81QKOJ47YyMvS
SetEnv NODE_ENV production
</IfModule>
# DO NOT REMOVE OR MODIFY. CLOUDLINUX ENV VARS CONFIGURATION END